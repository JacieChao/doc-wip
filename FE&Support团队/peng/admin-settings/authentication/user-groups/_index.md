---
标题: 用户和组
---

Rancher依赖于用户和组来确定谁被允许登录到Rancher，以及他们可以访问哪些资源。当您配置一个外部身份验证提供者时，该提供者的用户将能够登录到您的Rancher服务器。当用户登录时，身份验证提供者将向您的Rancher服务器提供用户所属的组的列表。

对集群、项目、多集群应用程序、全局DNS提供商和相关资源的访问可以通过向这些资源添加单个用户或组来控制。当您将组添加到资源时，身份验证提供者中属于该组的所有用户都将能够使用您为该组指定的权限访问该资源。有关角色和权限的更多信息，请参见[基于角色的访问控制](/docs/admin-settings/rbac/)。

### 管理成员

向资源添加用户或组时，您可以通过输入用户或组的名称来搜索用户或组。Rancher服务器将查询身份验证提供者，以查找与您输入的内容匹配的用户和组。搜索仅限于您当前登录时使用的身份验证提供者。例如，如果您启用了GitHub身份验证，但使用[本地](/docs/admin-settings/authentication/local/)用户帐户登录，则无法搜索GitHub用户或组。

所有用户，无论是本地用户还是来自身份验证提供者的用户，都可以进行查看和管理。相关操作可以通过在**全局**视图中，单击**用户**后进行操作。

{{< saml_caveats >}}

### 用户信息

Rancher维护通过身份验证提供者登录的每个用户的信息。这些信息包括用户是否被允许访问Rancher服务器，以及用户所属的组的列表。Rancher保留此用户信息，以便CLI、API和kubectl能够准确地反映基于身份验证提供者中的组成员关系的用户访问。

当用户使用身份验证提供者登录到UI时，Rancher将自动更新该用户信息。

#### 自动更新用户信息

_v2.2.0版本可用_

Rancher会定期刷新用户信息，甚至在用户通过UI登录之前也是如此。您可以控制Rancher执行此刷新的频率。在**全局**视图中，单击**设置**。有两个参数可以控制自动更新的设置:

- **`auth-user-info-max-age-seconds`**

  此设置控制在Rancher刷新用户信息之前用户信息的存储的最大老化时间。如果用户进行API调用(直接UI访问或通过使用Rancher CLI或kubectl调用)，并且自用户上次刷新以来的时间大于此设置，则Rancher将触发刷新。此设置默认为`3600`秒，即1小时。

- **`auth-user-info-resync-cron`**

  此设置控制用于为所有用户重新同步身份验证提供者信息的循环任务周期。无论用户最近是否登录或使用API，自动刷新任务都会确保用户信息在指定的时间间隔内刷新。此设置默认为“0 0 * * *”，即每天午夜一次。有关此设置的有效值的更多信息，请参见[Cron文档](https://en.wikipedia.org/wiki/Cron)。

> **注意:** 由于SAML不支持用户查找，因此基于SAML的身份验证提供者不支持定期刷新用户信息。只有当用户登录到Rancher UI时，才会刷新用户信息。

#### 手动更新用户信息

如果您不确定Rancher上一次执行用户信息自动刷新的时间，则可以执行所有用户的手动刷新。

1. 在**全局**视图中，单击导航栏中的**用户**。

1. 单击**刷新组成员身份**。

**结果:** Rancher为所有用户刷新用户信息。请求此刷新将更新哪些用户可以访问Rancher以及每个用户所属的所有组。

> **注意:** 由于SAML不支持用户查找，因此基于SAML的身份验证提供者不支持手动刷新用户信息。只有当用户登录到Rancher UI时，才会刷新用户信息。

### 会话周期

_v2.3.0版本可用_

用户会话的默认生命周期(TTL)是可调的。默认的会话周期是16小时。

1. 在**全局**视图中，单击**设置**。
1. 在**设置**页面，找到**`auth-user-session-ttl-minutes`**，点击**编辑**。
1. 输入会话应该持续的时间(以分钟为单位)，然后单击**保存**。

**结果:**用户的Rancher登录会话在设定的分钟数后自动退出。
